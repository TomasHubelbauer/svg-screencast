<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>SVG Screencast</title>
    <style>
      html {
        height: 100%;
      }

      body {
        /* Prevent transparent screenshot */
        background: white;
        display: flex;
        flex-direction: column;
        height: 100%;
        margin: 0;
      }

      textarea {
        flex: 1;
        font: normal 12pt monospace;
        margin: 1em;
        outline: none;
      }

    </style>
    <script>
      const lines = [
        'SVG Screencast is a tool for generating animated SVG (using CSS animation) screencasts.'
        + ' The tool is fed a series of screenshots with timestamps and generates a single self-'
        + 'contained animated SVG file.',
        'The screenshots are compared frame by frame to find only the changed region and reuse'
        + ' the unchanged background resulting in small file sizes.',
        'I have not compared SVG Screenshot to animated GIFs in terms of size (also size when'
        + ' GZIP\'d), but it provides at least two benefits over GIFs: support for transparency and'
        + ' full color support.',
        'I will provide comparisons with GIF and APNG when I\'ve made some.',
        'I hope you\'ll find this project useful. I have many ideas for improvement and will be'
        + ' glad to hear your feedback or review your contribution!',
        'Tom'
      ];

      const content = '\n' + lines.join('\n\n');

      let cursor = 0;
      window.addEventListener('load', () => {
        const showcaseTextArea = document.getElementById('showcaseTextArea');
        showcaseTextArea.focus();
        showcaseTextArea.select();

        function tick() {
          showcaseTextArea.textContent += content[cursor++];
          showcaseTextArea.setSelectionRange(showcaseTextArea.textContent.length - 1, showcaseTextArea.textContent.length);
          showcaseTextArea.scrollTop = showcaseTextArea.scrollHeight;
          if (cursor < content.length) {
            window.setTimeout(tick, Math.random() + 50);
          }
          else {
            // Close after a delay to make sure the final state is screenshot before the window closes
            window.setTimeout(window.close, 500);
          }
        }

        tick();
      });
    </script>
  </head>
  <body>
    <textarea id="showcaseTextArea">SVG Screencast</textarea>
  </body>
</html>
