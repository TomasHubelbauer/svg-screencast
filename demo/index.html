<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>SVG Screencast</title>
    <style>
      body {
        /* Prevent transparent screenshot */
        background: white;
        font: normal 12pt sans-serif;
        padding-bottom: 1em;
      }

      h1 {
        -webkit-text-stroke-width: 1px;
        -webkit-text-stroke-color: rgba(0, 0, 0, .5);
      }

      p {
        color: rgba(0, 0, 0, .85);
        text-shadow: 0 0 1px rgba(0, 0, 0, .25);
      }

      a {
        color: black;
        font-weight: bold;
      }
    </style>
    <script>
      /** @type {HTMLElement} */
      let cursor;
      const script = [
        () => cursor = document.createElement('h1'),
        () => document.body.append(cursor),
        ...[...'SVG Screencast ❤'].map(char => () => cursor.append(char)),

        () => document.body.style.background = 'whitesmoke',
        () => cursor.style.display = 'inline',
        () => cursor.style.background = 'linear-gradient(to right, red, orange, yellow, green, cyan, blue, indigo, violet)',
        () => cursor.style.webkitBackgroundClip = 'text',
        () => cursor.style.webkitTextFillColor = 'transparent',

        () => cursor = document.createElement('p'),
        () => document.body.append(cursor),
        ...[...'This image is an animated SVG file.'].map(char => () => cursor.append(char)),

        () => cursor = document.createElement('p'),
        () => document.body.append(cursor),
        ...[...'It contains a poster image and an array of patch images which are revealed one by one producing motion. ✨ The images are screenshots recorded ahead of time (real-time is also supported). 🔴'].map(char => () => cursor.append(char)),

        () => cursor = document.createElement('p'),
        () => document.body.append(cursor),
        ...[...'The idea is to replace GIF for screencast animations. These SVGs are much higher quality! 💪 And probably lower in size than an equivalent GIF. 👾'].map(char => () => cursor.append(char)),

        () => cursor = document.createElement('p'),
        () => document.body.append(cursor),
        ...[...'This tool is a work in progress. ⏳ Check the readme to see the roadmap. 🛣'].map(char => () => cursor.append(char)),

        () => cursor = document.createElement('p'),
        () => document.body.append(cursor),
        ...[...'Made by '].map(char => () => cursor.append(char)),

        () => cursor.append(document.createElement('a')),
        () => cursor = cursor.lastChild,
        ...[...'Tomas Hubelbauer'].map(char => () => cursor.append(char)),
        () => cursor.href = 'https://hubelbauer.net',

        () => cursor.insertAdjacentElement('beforebegin', document.createElement('img')),
        () => cursor = cursor.previousSibling,
        () => cursor.src = 'me.jpg',
        () => cursor.style.height = '1em',
        () => cursor.style.marginRight = '.5ex',

        () => cursor = cursor.nextSibling,
        () => cursor.style.display = 'inline-flex',
        () => cursor.style.alignItems = 'center',
      ];

      window.addEventListener('load', async () => {
        do {
          script.shift()();

          // Auto-scroll to reveal overflowing content
          window.scrollTo(0, document.body.scrollHeight);

          await new Promise(resolve => window.setTimeout(resolve, 50));
        }
        while (script.length > 0);

        // Close after a delay to make sure to capture the final state fully
        await new Promise(resolve => window.setTimeout(resolve, 500));
        window.close();
      });
    </script>
  </head>
  <body>
  </body>
</html>
